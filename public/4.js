(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{224:function(e,t,a){"use strict";a.r(t);var s={data:function(){return{name:" ",dateOfBirth:" ",emails:[" "],respErrors:[],sendedData:[],alertDangerMessage:" ",alertSuccessMessage:" "}},computed:{formState:function(){for(var e=!0,t=-1;this.emails[++t];)if(!this.emailState(t)){e=!1;break}return e&&(e=this.nameState&&this.dateState),e},nameState:function(){var e=null;return" "!=this.name&&(e=(!this.respErrors.name||this.sendedData.name&&this.sendedData.name!=this.name)&&this.name.length>2),e},dateState:function(){return" "==this.dateOfBirth?null:new Date(this.dateOfBirth).getTime()<Date.now()},nameInvalidFeedback:function(){var e="Invalid name format!";return this.respErrors.name&&(e="(name: "+this.sendedData.name+") error:",$.each(this.respErrors.name,function(t,a){e+=" "+a})),e}},methods:{emailState:function(e){if(" "==this.emails[e])return null;var t=this.emails[e];return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)},deleteRow:function(e){this.emails.length>1&&this.emails.splice(e,1)},addRow:function(e){e.preventDefault(),this.emails.push(" ")},reset:function(){this.name=this.dateOfBirth=" ",this.emails=[" "]},onReset:function(e){e.preventDefault(),this.reset()},onSubmit:function(e){e.preventDefault(),this.sendedData={name:this.name,date_of_birth:this.dateOfBirth,emails:this.emails},this.alertDangerMessage=this.respErrors=this.alertSuccessMessage=" ",this.formState&&axios.post("/api/user",this.sendedData).then(function(e){console.log(e.data);var t=[];$.each(e.data.emails,function(e,a){t.push(a.email)}),this.alertSuccessMessage="new user: (name: "+e.data.name+", date of birth: "+e.data.date_of_birth+", emails: "+t.join()+")",this.reset()}.bind(this)).catch(function(e){console.log(e.response.data),e.response.data.errors&&(this.respErrors=e.response.data.errors),e.response.data.message&&(this.alertDangerMessage=e.response.data.message)}.bind(this))}}},i=a(221),r=Object(i.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"px-md-2",attrs:{id:"CreateUser"}},[a("h1",[e._v("Make New User")]),e._v(" ")," "!=e.alertDangerMessage?a("div",{staticClass:"alert alert-danger my-2 alert-dismissible fade show",attrs:{role:"alert"}},[a("strong",[e._v("Upoad error:")]),e._v(" "+e._s(e.alertDangerMessage)+"\n    "),e._m(0)]):e._e(),e._v(" ")," "!=e.alertSuccessMessage?a("div",{staticClass:"alert alert-success my-2 alert-dismissible fade show",attrs:{role:"alert"}},[a("strong",[e._v("Create new user is successful:")]),e._v(" "+e._s(e.alertSuccessMessage)+"\n    "),e._m(1)]):e._e(),e._v(" "),a("b-form",{on:{submit:e.onSubmit,reset:e.onReset}},[a("div",{attrs:{role:"group"}},[a("b-form-group",{attrs:{id:"inputNameGr",description:"Let us know your name.",label:"Enter your name","label-for":"input1","invalid-feedback":e.nameInvalidFeedback,"valid-feedback":"Thank you!",state:e.nameState}},[a("b-form-input",{attrs:{id:"inputName",state:e.nameState,trim:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("b-form-group",{attrs:{id:"inputDoBGr",description:"Let us know your birthdate.",label:"Enter your birthdate","label-for":"inputDoB","invalid-feedback":"Please give valid birthdate","valid-feedback":"Thank you!",state:e.dateState}},[a("b-form-input",{attrs:{id:"inputDoB",state:e.dateState,type:"date",trim:""},model:{value:e.dateOfBirth,callback:function(t){e.dateOfBirth=t},expression:"dateOfBirth"}})],1),e._v(" "),e._l(e.emails,function(t,s){return a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("b-form-group",{attrs:{id:"inputEmail"+s+"Gr",description:"Let us know your email.",label:"Enter your email "+(s+1),"label-for":"inputEmail"+s,"invalid-feedback":"Please give valid email","valid-feedback":"Thank you!",state:e.emailState(s)}},[a("b-input-group",[a("b-form-input",{attrs:{id:"inputEmail"+s,state:e.emailState(s),type:"email",trim:""},model:{value:e.emails[s],callback:function(t){e.$set(e.emails,s,t)},expression:"emails[index]"}}),e._v(" "),a("b-input-group-append",[a("b-button",{attrs:{disabled:1==e.emails.length,variant:"danger"},on:{click:function(t){return e.deleteRow(s)}}},[e._v("\n                  Delete email\n                ")])],1)],1)],1)],1)])}),e._v(" "),a("button",{staticClass:"mb-3 btn btn-secondary",on:{click:e.addRow}},[e._v("+ Add email")])],2),e._v(" "),a("div",{staticClass:"text-right"},[a("b-button",{attrs:{type:"submit",variant:"primary",disabled:!e.formState}},[e._v("Submit")]),e._v(" "),a("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Reset")])],1)])],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,"e468e432",null);t.default=r.exports}}]);
//# sourceMappingURL=4.js.map